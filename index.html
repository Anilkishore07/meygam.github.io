
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>The Story of Experiments with Technology</title>
  <meta name="author" content="Meygam Inc">

  
  <meta name="description" content="At the end of this blog we will provision a server with vagrant and run apache in a docker container. To understand dockers, visit https://docs. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.meygam.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="The Story of Experiments with Technology" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45942294-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Story of Experiments with Technology</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.meygam.com/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/09/11/provisioning-an-apache-server-with-dockers-and-vagrant/">Provisioning an Apache Server With Dockers and Vagrant</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-11'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>At the end of this blog we will provision a server with vagrant and run apache in a docker container.</p>

<p>To understand dockers, visit <a href="https://docs.docker.com/">https://docs.docker.com/</a></p>

<p>You can download the docker file &amp; vagrant file used in this blog from <a href="https://github.com/meygam/docker-apache-ubuntu.git">https://github.com/meygam/docker-apache-ubuntu.git</a></p>

<h3>Docker File</h3>

<p>To run a docker container, we need an docker image. You could either pull a publicly available images from <a href="https://registry.hub.docker.com/">https://registry.hub.docker.com/</a> or build your own. In our case we will build our own docker image from a ubuntu base image.</p>

<p>Docker file to have apache installed in it looks like below. Will take a look what each line does.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="lineno">1</span> <span class="no">FROM</span>    <span class="ss">ubuntu</span><span class="p">:</span><span class="mi">14</span><span class="o">.</span><span class="mo">04</span>
<span class="lineno">2</span>   <span class="no">MAINTAINER</span> <span class="no">Saravana</span> <span class="no">Kumar</span> <span class="no">Periyasamy</span> <span class="o">&lt;</span><span class="n">saravanakumar</span><span class="o">.</span><span class="n">periyasamy</span><span class="vi">@gmail</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
<span class="lineno">3</span> 
<span class="lineno">4</span>   <span class="no">RUN</span>     <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="lineno">5</span>   <span class="no">RUN</span>     <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">apache2</span>
<span class="lineno">6</span>   <span class="no">CMD</span>     <span class="n">service</span> <span class="n">apache2</span> <span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="n">tail</span> <span class="o">-</span><span class="n">f</span>   <span class="sr">/var/</span><span class="n">log</span><span class="o">/</span><span class="n">apache2</span><span class="o">/</span><span class="n">error</span><span class="o">.</span><span class="n">log</span></code></pre></div>


<p>Line#1: takes the base image ubuntu, tag 14.04.
Line#2: is the maintainers meta data for this new docker image.
Line#&frac34;: Runs apt-get update and installs apache2.
Line#5: Starts Apache and tails the apache logs. This will be the default command that will run when a new container is created from this docker image. Tailing the log helps to have a foreground process, and it is required if this container has to be run in background.</p>

<h3>Vagrant File</h3>

<p>To build docker image from this file we need a computer with docker installed. To make life easier, we will use Vagrant to build and run this container. If you are new to vagrant, go to this link get started - <a href="http://docs.vagrantup.com/v2/getting-started/index.html">http://docs.vagrantup.com/v2/getting-started/index.html</a></p>

<p>Here is the vagrant file to build an image from docker file, run the docker and forward the port 80 from vm to host on port 18080.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="lineno"> 1</span> <span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span>  <span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
<span class="lineno"> 4</span>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;hashicorp/precise64&quot;</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">18080</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&quot;docker&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span>
<span class="lineno"> 9</span>       <span class="n">d</span><span class="o">.</span><span class="n">build_image</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span> <span class="ss">args</span><span class="p">:</span> <span class="s2">&quot;-t speriyasamy/apache2&quot;</span>
<span class="lineno">10</span>       <span class="n">d</span><span class="o">.</span><span class="n">run</span> <span class="s2">&quot;apache2&quot;</span><span class="p">,</span> <span class="ss">image</span><span class="p">:</span> <span class="s2">&quot;speriyasamy/apache2&quot;</span><span class="p">,</span> <span class="ss">args</span><span class="p">:</span> <span class="s2">&quot;-p 80:80&quot;</span>
<span class="lineno">11</span>      <span class="k">end</span>
<span class="lineno">12</span>  <span class="k">end</span></code></pre></div>


<p>Use <code>vagarnt up</code> to bring the vm up. It should install docker, build the docker image and use the same image to run the container.</p>

<p>You can verify this by ssh into the vagrant box, <code>vagarnt ssh</code>, and list the docker container using <code>docker ps</code> and you should see a apache container running.</p>

<p><img src="/assets/2014/sep/docker.png" alt="Docker Screenshot" /></p>

<p>Now you can access the apache from your host machine using <a href="http://localhost:18080">http://localhost:18080</a></p>

<p><img src="/assets/2014/sep/apache.png" alt="Apache Screenshot" /></p>

<h3>Manual Steps</h3>

<p>If you prefer not to use Vagrant, install the docker on your host machine and run the below command manually.</p>

<pre><code>docker build &lt;&lt;Dockerfile_Folder&gt;&gt; -t "speriyasamy/apache2"
</code></pre>

<p>And to run a contianer manually from this image, use the below command</p>

<pre><code>docker run -d speriyasamy/apache2
</code></pre>

<h3>Commonly used docker commands</h3>

<pre><code>#list images available on your host machine 
docker images

#list all the docker containers including inactive ones
docker ps -a

#pull a docker image from docker hub
docker pull speriyasamy/docker-openfire-centos

#stop container
docker stop &lt;&lt;cotainer id&gt;&gt;

#start container
docker start &lt;&lt;cotainer id&gt;&gt;

#remove container
docker rm &lt;&lt;cotainer id&gt;&gt;

#remove docker images
docker rmi &lt;&lt;cotainer id&gt;&gt;
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/13/connecting-to-open-vpn-server-from-ios-device/">Connecting to Open VPN Server From iOS Device</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-03-13'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>To connect iOS device to Open VPN server we need</p>

<ul>
<li>Open VPN app</li>
<li>Open VPN setting file (client.ovpn)</li>
<li>Client Certificate</li>
<li>CA Certificate (if its self signed)</li>
</ul>


<h3>Install Open VPN app</h3>

<p>Install Open VPN client from app store (<a href="https://itunes.apple.com/app/openvpn-connect/id590379981">https://itunes.apple.com/app/openvpn-connect/id590379981</a>)</p>

<p><img src="/assets/images/2014/Mar/20140313_174551000_iOS.jpg" alt="" /></p>

<h3>Import Open VPN settings</h3>

<p>Get the Open VPN settings file, clinet.ovpn, from your VPN admin. Send that file to your iOS device through email, and open it in Open VPN app on the iOS device.</p>

<p><img src="/assets/images/2014/Mar/20140313_175334000_iOS.jpg" alt="" /></p>

<p>Click on the green plus sign to import the profile to iOS device.</p>

<p>{<3>}<img src="/assets/images/2014/Mar/20140313_180407000_iOS.jpg" alt="" /></p>

<p>Once imported it should like below</p>

<p><img src="/assets/images/2014/Mar/20140313_180416000_iOS.jpg" alt="" /></p>

<h3>Install Client Certificate</h3>

<p>Get the client certificate in .p12 format from your Open VPN admin. Send that also to your iOS device through email, and install it.</p>

<p><img src="/assets/images/2014/Mar/20140313_180433000_iOS-1.jpg" alt="" /></p>

<pre><code>Note: You need your Client certificate with password protected. iOS doesn't allow to import certificate with blank password.
</code></pre>

<p><img src="/assets/images/2014/Mar/20140313_180452000_iOS.jpg" alt="" /></p>

<p>You should see a successfully installed message</p>

<p><img src="/assets/images/2014/Mar/20140313_180504000_iOS.jpg" alt="" /></p>

<p>If it say &ldquo;Not Trusted&rdquo; as shown in my certificate above, then you will have to install the CA certificate. Else, when you try to connect Open VPN you will get the below error</p>

<pre><code>2014-03-13 10:59:29 EVENT: CORE_ERROR PolarSSL: ca certificate is undefined [ERR]
</code></pre>

<h3>Install CA Certificate</h3>

<p>Get the CA certificate from VPN admin. it should be in the form of .pem file. Send that to your iOS device through email, and install it.</p>

<p><img src="/assets/images/2014/Mar/20140313_180531000_iOS.jpg" alt="" /></p>

<p>Install the root CA certificate.</p>

<p><img src="/assets/images/2014/Mar/20140313_180534000_iOS.jpg" alt="" /></p>

<p>Once installed you should see that Certificate Authority is &ldquo;Trusted&rdquo;</p>

<p><img src="/assets/images/2014/Mar/20140313_180547000_iOS.jpg" alt="" /></p>

<h3>Connect to Open VPN server</h3>

<p>Open &ldquo;Open VPN&rdquo; app in your iOS device, select the <code>None Selected</code> list and select your certificate.</p>

<p><img src="/assets/images/2014/Mar/20140313_180601000_iOS.jpg" alt="" /></p>

<p>Now turn on the VPN button and you should get connected to Open VPN server successfully.</p>

<p><img src="/assets/images/2014/Mar/20140313_180641000_iOS.jpg" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/01/jenkins-android/">Automating the Continuous Integration of Android Projects With Gradle Using Jenkins on Windows</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-03-01T08:21:00-06:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>8:21 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post will show how to automate the deployment process of a Android Application using Jenkins Continuous Integration - to build the project, run the unit tests (if any), archive the built artifacts and run the Android lint reports.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/03/01/jenkins-android/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/05/jenkins-release-upload/">Automating the Release of Java Artifacts Using Jenkins on Windows</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-02-05T08:21:00-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:21 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post will show how to automate the release process of a Java Web Application (Student Enrollment Application developed using MYSQL DB with Hibernate ORM in a REST based Jersey2 Spring environment) using Jenkins Continuous Integration - upload the release artifacts to release repository. The job configured using this post must be run only after uploading the snapshot artifacts into the snapshot repository as explained in the earlier post <a href="http://elizabetht.github.io/blog/2014/01/13/jenkins-snapshot-upload/">Automating the Deployment and Upload of Snapshot Java Artifacts using Jenkins on Windows</a>. The details of the actual application are explained in the earlier post given by the link <a href="http://elizabetht.github.io/blog/2013/12/13/student-enrollment-using-jersey-rest-with-spring/">Building Java Web Application Using Jersey REST With Spring</a>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/05/jenkins-release-upload/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/17/wordpress-on-aws/">WordPress on AWS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-17'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this blog I am going to cover the step by step instructions to host your own WordPress blog in AWS. Hosting your own blog has some advantages, you can install any plugins/themes you want and publish any content you like. Having said that it’s not for everyone. If you are a basic user better you create account in wordpress.com. I wanted to run my own blog engine, primarily because I am a techie.</p>

<h3>Architecture for WordPress on AWS</h3>

<p>At a minimum WordPress needs a web server, to serve your blog and a database instance, to store your blog contents. You can install both web server and the database instance in just one server. But for high availability and better backup mechanism I choose to keep the web server and database instance separate. Below is the architecture that we are going to follow. I will talk about each components in following sections.</p>

<iframe src="http://www.slideshare.net/slideshow/embed_code/30109797" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>




<table>
<tr>
    <th>Service</th>
    <th>Unit Rate</th>
    <th>Quantity (Per Year)</th>
    <th width="80px">Cost per Year</th>
</tr>
<tr>
  <td>EC2 – Linux (t1.micro)</td>
  <td>$0.02 per hour</td>
  <td>365 days * 24 hours = 8760 hours</td>
  <td>$175.20</td>
</tr>
<tr>
  <td>EC2 – Data Transfer OUT From Amazon EC2 To Amazon Elastic Load Balancing</td>
  <td>$0.01 per GB</td>
  <td>1 GB per month * 12 month = 12 GB</td>
  <td>$0.12</td>
</tr>
<tr>
  <td>EC2 – Data Transfer IN To Amazon EC2 From Amazon RDS  Using a private IP address    </td>
  <td>$0.00 per GB</td> 
  <td>1 GB per month * 12 month = 12 GB</td>
  <td>$0.00</td>
</tr>
<tr>
  <td>EBS - Standard volumes</td>
  <td>$0.10 per GB-month</td>
  <td>8 GB * 12 month
= 96 GB-month</td>
  <td>$9.60</td>
</tr>
<tr>
  <td>EBS - Standard volumes</td>
  <td>$0.10 per 1 million I/O requests</td>
  <td>1 million request per month * 12 month</td>
  <td>$1.20</td>
</tr>
<tr>
  <td>RDS – MySQL -
Standard Deployment (db.t1.micro)</td>
  <td>$0.025 per hour</td>
  <td>365 days * 24 hours
= 8760 hours</td>
  <td>$219.00</td>
</tr>
<tr>
  <td>RDS – MySQL - Standard Deployment Database Storage</td>
  <td>$0.125 per GB-month</td>
  <td>20 GB * 12 month
= 240 GB-month</td>
  <td>$30.00</td>
</tr>
<tr>
  <td>ELB</td>
  <td>$0.025 per hour</td>
  <td>365 days * 24 hours
= 8760 hours</td>
  <td>$219.00</td>
</tr>
<tr>
  <td>ELB – Data Transfer</td>
  <td>$0.008 per GB of data processed by ELB</td>
  <td>1 GB per month * 12 month = 12 GB</td>
  <td>$0.10
</td>
</tr>
<tr>
<td>Route 53 - Hosted Zones</td>
<td>$0.50 per hosted zone / month for the first 25 hosted zones
$0.10 per hosted zone / month for additional hosted zones</td>
<td>1 hosted zone * 12 month = 12 hosted zone month</td>
<td>$6.00</td>
</tr>
<tr>
<td>Route 53 -
Standard Queries</td>
<td>$0.500 per million queries – first 1 Billion queries / month
$0.250 per million queries – over 1 Billion queries / month</td>
<td>under 1 million queries per month
* 12 month = 12 million quries</td>
<td>$6.00</td>
</tr>
<tr>
<td></td>
<td></td>
<td><strong>Total Cost Per Year (approx.)</strong></td>
<td align="right"><strong>$666.22</strong></td>
</tr>
<tr>
<td><strong> </strong></td>
<td><strong> </strong></td>
<td><strong>Total Cost Per Month <strong>(approx.)</strong></strong></td>
<td><strong>$55.52</strong></td>
</tr>
</table>


<p>My blog do not get lot of visits for now, so I went with less powerful machines and DB, to save cost. I can scale my blog when required, that’s the advantage of AWS. The current architecture allows scaling. I will cover more about scaling in next part.</p>

<h3>Setup infrastructure in AWS</h3>

<ul>
<li>Create a VPC with the CIDR 10.0.0.0/16.
<img src="http://farm4.staticflickr.com/3831/11989981795_b8780b74a8_b_d.jpg" alt="" /></li>
<li>Create a private subnets under the new VPC. We need two subnets in different availability zones to setup RDS in a VPC.
<img src="http://farm6.staticflickr.com/5547/12023870814_0df096e40a_b_d.jpg" alt="" /></li>
<li>Create an internet gateway and attach it to the VPC.
<img src="http://farm4.staticflickr.com/3732/12023835684_beebf39e90_b_d.jpg" alt="" /></li>
<li>Add internet gateway to the route table and attach it to the subnet.
<img src="http://farm8.staticflickr.com/7452/12023771363_854f9efc68_b_d.jpg" alt="" /></li>
<li>Create a DB Subnet group with minimum two subnets each in different availability zones.
<img src="http://farm6.staticflickr.com/5472/12023771423_9b337e66b5_b_d.jpg" alt="" /></li>
<li>Create an MySQL RDS instance inside the VPC, so that only the instances in the same network can connect to it.
<img src="http://farm6.staticflickr.com/5535/12023836124_690f1f14d6_b_d.jpg" alt="" /></li>
<li>Create an Ubuntu EC2 instance inside the VPC without any public IP, and attach it to the elastic IP, so that I can ssh into the machine.
<img src="http://farm4.staticflickr.com/3720/12024318096_9fdcc9f651_b_d.jpg" alt="" /></li>
</ul>


<h3>Install php5</h3>

<p>Now that EC2 is up and running, ssh into the machine using the private key using the command</p>

<pre><code>ssh -i &lt;&lt;private-key.pem&gt;&gt; ubuntu@&lt;&lt;elastic ip&gt;&gt;
</code></pre>

<p>once you are in the machine, run</p>

<pre><code>sudo apt-get update
</code></pre>

<p>to update the package list. Then install the php5, php5 fpm and php5 mysql packages using the below command</p>

<pre><code>sudo apt-get install php5
sudo apt-get insatll php-fpm
sudo apt-get install php5-mysql
</code></pre>

<h3>Install WordPress</h3>

<p>Download and extract the WordPress using the below commands.</p>

<pre><code>mkdir -p /var/www/blog.meygam.com/htdocs/ /var/www/blog.meygam.com/logs/
cd /var/www/blog.meygam.com/htdocs/
wget http://wordpress.org/latest.tar.gz
tar –strip-components=1 -xvf latest.tar.gz
rm latest.tar.gz
chown -R www-data:www-data /var/www/blog.meygam.com/
</code></pre>

<h3>Install &amp; configure nginx</h3>

<p>By default Ubuntu comes with Apache2. I like to use nginx, as its more modern than Apache2. So first we need to uninstall the Apache2 &amp; all of its dependencies using the below command.</p>

<pre><code>sudo apt-get remove apache2*
</code></pre>

<p>Install nginx using the below command.</p>

<pre><code>sudo apt-get install nginx
</code></pre>

<p>Create the website configuration</p>

<pre><code>vi /etc/nginx/sites-available/blog.meygam.com
</code></pre>

<p>and add the below configuration in the file. Replace blog.meygam.com to your site name.</p>

<pre><code>server {

server_name blog.meygam.com;

access_log /var/log/nginx/blog.meygam.com.access.log;
error_log /var/log/nginx/blog.meygam.com.error.log;

root /var/www/blog.meygam.com/htdocs;
index index.php;

location / {

try_files $uri $uri/ /index.php?$args;

}

location ~ \.php$ {

try_files $uri =404;
include fastcgi_params;
fastcgi_pass unix:/var/run/php5-fpm.sock;

}

}
</code></pre>

<p>Restart the nginx to load the configuration</p>

<pre><code>sudo service nginx restart
</code></pre>

<h3>Configure Load Balancer</h3>

<p>Configure Elastic load balancer (ELB) attach the EC2 instance that we created to it. Using ELB will let you scale the application later point.</p>

<p><img src="http://farm4.staticflickr.com/3685/12024782696_02458889fc_b_d.jpg" alt="" /></p>

<p><img src="http://farm8.staticflickr.com/7349/12024303824_703f47f09a_b_d.jpg" alt="" /></p>

<p><img src="http://farm8.staticflickr.com/7438/12024782816_f152481a0c_b_d.jpg" alt="" /></p>

<p><img src="http://farm4.staticflickr.com/3686/12024236493_d63f2c8e01_b_d.jpg" alt="" /></p>

<h3>Configure Route 53</h3>

<p>Route 53 helps to map your domain name to the elastic load balancer. Create a hosted zone for your domain, and add the Route 53 name servers to your domain register.</p>

<p><img src="http://farm4.staticflickr.com/3806/12024318566_f502004ed4_b_d.jpg" alt="" /></p>

<p>Add a CNAME record to point to your ELB.
<img src="http://farm3.staticflickr.com/2823/12023772813_a2a59d99fa_b_d.jpg" alt="" /></p>

<h3>Configure WordPress</h3>

<p>Now access your website in the browser, and you should see the WordPress configuration page. Follow the instructions and point it to the database that we created.</p>

<p><img src="http://farm6.staticflickr.com/5511/12024553674_1d1230de93_b_d.jpg" alt="" /></p>

<p><img src="http://farm8.staticflickr.com/7415/12024196015_b966e2ee75_b_d.jpg" alt="" /></p>

<p><img src="http://farm4.staticflickr.com/3769/12024553914_8e8b023647_b_d.jpg" alt="" /></p>

<p><img src="http://farm6.staticflickr.com/5540/12025035976_f9738840b3_b_d.jpg" alt="" /></p>

<p><img src="http://farm6.staticflickr.com/5534/12024554344_e2b70a17af_b_d.jpg" alt="" /></p>

<p>And that’s it, your blog is fully up &amp; running on AWS now! Happy Blogging!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/17/spring-cache-abstraction-using-ehcache/">Installing Oracle Java 7 and Tomcat 7 on Ubuntu 13</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-17'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this article, we will see how to use EhCahce with Spring Cache abstraction. Refer <a href="http://ehcache.org/documentation/recipes/spring-annotations">http://ehcache.org/documentation/recipes/spring-annotations</a> for using EhCache’s own annotations. The advantage of using it with Spring Cache abstraction is that it&rsquo;s easy to change the underlying storage. Say in future if we want to change it to Memcached, then it is just a configuration change and not a code change.</p>

<p>Let’s look at the Spring configuration steps and common issues that one encounters while using Spring Cache.</p>

<ul>
<li>Add the Ehcache dependency to the project</li>
</ul>


<script src="https://gist.github.com/saravanakumar-periyasamy/6613368.js"></script>


<p>Note: Without adding the dependency you might see the error</p>

<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: Lnet/sf/ehcache/CacheManager;
</code></pre>

<ul>
<li>Include the cache namespace and schema location in the Spring Configuration file.</li>
</ul>


<script src="https://gist.github.com/saravanakumar-periyasamy/6613426.js"></script>


<ul>
<li>Configure the application to use annotation driven</li>
</ul>


<script src="https://gist.github.com/saravanakumar-periyasamy/6613497.js"></script>


<ul>
<li>Define the cacheManager bean</li>
</ul>


<script src="https://gist.github.com/saravanakumar-periyasamy/6613514.js"></script>


<ul>
<li>Configure the ehcache.xml
Defined the caches in the ehcache configuration XML. Below is the sample ehcache xml file to define the caches.</li>
</ul>


<script src="https://gist.github.com/saravanakumar-periyasamy/6613543.js"></script>


<p>Note: Without defaultCache defined, below error will be thrown</p>

<pre><code>Cannot resolve reference to bean 'cacheManager' while setting bean property 'cacheManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cacheManager' defined in ServletContext resource [/WEB-INF/servlet-config.xml]: Cannot resolve reference to bean 'ehcache' while setting bean property 'cacheManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ehcache' defined in ServletContext resource [/WEB-INF/servlet-config.xml]: Invocation of init method failed; nested exception is net.sf.ehcache.CacheException: Illegal configuration. No default cache is configured.
</code></pre>

<ul>
<li>Add the @Cacheable annotation to the code</li>
</ul>


<script src="https://gist.github.com/saravanakumar-periyasamy/6613568.js"></script>


<h4>Common issues one might face in using the Spring Cache abstraction</h4>

<ul>
<li>Cache key collision:
The default key generator is a simple one and it is easy to get key collisions using this. Refer the DefaultKeyGenerator.java code to see how it works. Also when you have an array as a parameter, the default key generator produces different key for each execution.</li>
</ul>


<p>It’s better to use your own key generator. Below is the sample one I used</p>

<script src="https://gist.github.com/saravanakumar-periyasamy/6613617.js"></script>


<p>And you can set this as your default key generator in the Spring configuration file like below.</p>

<script src="https://gist.github.com/saravanakumar-periyasamy/6613634.js"></script>


<ul>
<li>Application context is loaded more than once:</li>
</ul>


<p>Sometimes due to misconfiguration the application context gets loaded twice and due to that you might get the error. Make sure you name the cacheManager in the ehcache.xml and you are not loading the application context twice.</p>

<pre><code>Another unnamed CacheManager already exists in the same VM. 
Please provide unique names for each CacheManager in the config or do one of following:
1. Use one of the CacheManager.create() static factory methods to reuse same CacheManager with same name or create one if necessary
2. Shutdown the earlier cacheManager before creating new one with same name.
The source of the existing CacheManager is: InputStreamConfigurationSource [stream=sun.net.www.protocol.jar.JarURLConnection$JarURLInputStream@47f3ed6]
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/17/overview-of-microstrategy-features/">Overview of Microstrategy Features</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-17'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In my previous blog <a href="/microstrategy-9-installation-on-a-new-windows-2008-server/">Microstrategy 9 Installation on a new Windows 2008 server</a> we looked at installing the MSTR. Here let&rsquo;s look at the features we installed. Below is the list of all the features from MSTR.</p>

<p>{<1>}<img src="/content/images/2014/Mar/062313_1702_overviewofm1-1.png" alt="" /></p>

<p>The below picture will give us the overview of how all these features are related.</p>

<p>{<2>}<img src="/content/images/2014/Mar/062313_1702_overviewofm2-1.png" alt="" /></p>

<p>Let&rsquo;s look at each one of them in detail</p>

<h4>Microstrategy Intelligence Server</h4>

<p>Microstrategy Intelligence Server is the architectural foundation for the Microstrategy platform. This communicates to the various data sources, and runs the reports and distributes to MSTR Desktop and Web users. Intelligence server ensures the scalability and fault tolerance required for analysis of terabyte databases and millions of users.</p>

<p>Below are the sub-features installed as part of MSTR Intelligence server. We will cover these features in detail when we explore the Intelligence server in detail.</p>

<p>{<3>}<img src="/content/images/2014/Mar/062313_1702_overviewofm3-1.png" alt="" /></p>

<h4>Microstrategy Web universal</h4>

<p>MSTR Web enables the users to create and/or run the reports in web.</p>

<p>{<4>}<img src="/content/images/2014/Mar/062313_1702_overviewofm4-1.png" alt="" /></p>

<p>Below are the sub-features installed as part of MSTR Web Universal.</p>

<p>{<5>}<img src="/content/images/2014/Mar/062313_1702_overviewofm5-1.png" alt="" /></p>

<h4>Microstrategy Office</h4>

<p>MSTR Office is a plugin for Microsoft Office and lets the user to run reports from Office tools. I could not show the screen shot for this product, I didn&rsquo;t install this feature as I don&rsquo;t have the MS Office in my VM.</p>

<p>Below are the sub-features installed as part of MSTR Office.</p>

<p>{<6>}<img src="/content/images/2014/Mar/062313_1702_overviewofm6.png" alt="" /></p>

<h4>Microstrategy Mobile</h4>

<p>MSTR Mobile enables the users to view the reports from mobile devices.</p>

<p>{<7>}<img src="/content/images/2014/Mar/062313_1702_overviewofm7.png" alt="" /></p>

<p>Below are the sub-features installed as part of MSTR Mobile.</p>

<p>{<8>}<img src="/content/images/2014/Mar/062313_1702_overviewofm8.png" alt="" /></p>

<h4>Microstrategy Desktop Products</h4>

<p>MSTR Desktop allows the user to create and/or run the reports in the Desktop.</p>

<p>{<9>}<img src="/content/images/2014/Mar/062313_1702_overviewofm9.png" alt="" /></p>

<p>MSTR Architect helps to map the data model to the business model.</p>

<p>{<10>}<img src="/content/images/2014/Mar/062313_1702_overviewofm10.png" alt="" /></p>

<p>Below are the sub-features installed as part of MSTR Desktop.</p>

<p>{<11>}<img src="/content/images/2014/Mar/062313_1702_overviewofm11.png" alt="" /></p>

<h4>Microstrategy Object Manager</h4>

<p>MSTR Object Manager is used to migrate MSTR objects from one environment to another.</p>

<p>{<12>}<img src="/content/images/2014/Mar/062313_1702_overviewofm12.png" alt="" /></p>

<h4>Microstrategy Command Manager</h4>

<p>Command Manager is used to create scripts to automate common administrative tasks.</p>

<p>{<13>}<img src="/content/images/2014/Mar/062313_1702_overviewofm13.png" alt="" /></p>

<h4>Microstrategy Enterprise Manager</h4>

<p>MSTR Enterprise Manager provides the usage details of the MSTR Intelligence Server. The core of Enterprise Manager is nothing but a MSTR project with set of predefined reports, and the metrics and attributes to create your own reports. You can run reports that help you to:</p>

<ul>
<li>Allocate system resources based on data warehouse usage trends</li>
<li>Research efficient aggregation, partitioning, and indexing strategies</li>
<li>Profile users based on their system resource usage</li>
<li>Determine the optimal time to run scheduled jobs, load data, or perform routine system and database maintenance</li>
<li>Determine the most popular reports so you can schedule and cache them, thus increasing their response time and reducing the load on the system</li>
<li>Identify unused objects from your metadata repository so they can be deleted later</li>
<li>Identify peak usage times and patterns and, if necessary, change your Intelligence Server configuration to respond appropriately</li>
<li>Determine whether you need to add more threads to the database connection threads if queue times are long</li>
<li>Find which tables are the most used, and create indexes to improve performance</li>
</ul>


<h4>Microstrategy Integrity Manager</h4>

<p>MSTR Integrity Manager is used to automate the report testing.</p>

<p>{<14>}<img src="/content/images/2014/Mar/062313_1702_overviewofm14.jpg" alt="" /></p>

<p>{<15>}<img src="/content/images/2014/Mar/mstr_integrity_manager.png" alt="" /></p>

<h4>Microstrategy System Manager</h4>

<p>Microstrategy System Manager helps to automate the configuration of MSTR products in larger environments.</p>

<p>{<16>}<img src="/content/images/2014/Mar/062313_1702_overviewofm15.png" alt="" /></p>

<h4>Microstrategy SDK</h4>

<p>MSTR SDK enables the developers to extend and integrate MSTR platform through a set of APIs that exposes all platform functionality. It helps to embed intelligence in any custom application.</p>

<h4>Microstrategy Narrowcast Sever</h4>

<p>MSTR Narrowcast server delivers the report in mail/phone based on the schedules.</p>

<p>{<17>}<img src="/content/images/2014/Mar/062313_1702_overviewofm16.png" alt="" /></p>

<p>Below are the sub-features installed as part of MSTR Narrowcast Server.</p>

<p>{<18>}<img src="/content/images/2014/Mar/062313_1702_overviewofm17.png" alt="" /></p>

<h4>Other Components</h4>

<p>This installs the drivers to access Cubes from Analysis Servers and Sequelink ODBC Socket server to talk to multiple data sources.</p>

<p>{<19>}<img src="/content/images/2014/Mar/062313_1702_overviewofm18-1.png" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/17/installing-oracle-java-7-and-tomcat-7-on-ubuntu-13/">Installing Oracle Java 7 and Tomcat 7 on Ubuntu 13</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-17'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Setting up a new Ubuntu server with Java 7 &amp; Tomcat 7 seems to be trivial, but often I had to do it at my workplace and everytime I had to google it to do this. So I thought I will list down the steps in my blog.</p>

<h3>Install Oracle Java 7</h3>

<p>Run the below commands to install Oracle Java 7 - steps followed from <a href="http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html" target="_blank">INSTALL ORACLE JAVA 7 IN UBUNTU VIA PPA REPOSITORY</a></p>

<pre><code>sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer
</code></pre>

<p>Check if the right version of java is installed</p>

<pre><code>java -version

java version "1.7.0_45"
Java(TM) SE Runtime Environment (build 1.7.0_45-b06)
Java HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)
</code></pre>

<p>Run the below command to set the Java environment variables</p>

<pre><code>sudo apt-get install oracle-java7-set-default
</code></pre>

<h3>Install Unzip</h3>

<p>Run the below command to install unzip, we need this to unzip the tomcat binaries.</p>

<pre><code>sudo apt-get install unzip
</code></pre>

<h3>Install Tomcat 7</h3>

<p>Download the latest tomcat from tomcat website &amp; unzip it. And give execute access to all .sh files. Start the tomcat manually.</p>

<pre><code>cd /opt
sudo wget http://www.webhostingjams.com/mirror/apache/tomcat/tomcat-7/v7.0.52/bin/apache-tomcat-7.0.52.zip
sudo unzip apache-tomcat-7.0.52.zip
sudo chmod +x /opt/apache-tomcat-7.0.52/bin/*.sh
sudo /opt/apache-tomcat-7.0.52/bin/startup.sh
</code></pre>

<p>Check if the tomcat is running. The below command should return the tomcat default page.</p>

<pre><code>curl http://localhost:8080
</code></pre>

<p> Note: I don&rsquo;t use tomcat7 from ubuntu repository as it some times screws up my Oracle Java installation and installs Open JDK.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/13/jenkins-snapshot-upload/">Automating the Deployment and Upload of Snapshot Java Artifacts Using Jenkins on Windows</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-13T16:50:30-06:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:50 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post will show how to automate the deployment process of a Java Web Application (Student Enrollment Application developed using MYSQL DB with Hibernate ORM in a REST based Jersey2 Spring environment) using Jenkins Continuous Integration - to build the project, run the unit tests, upload the built artifacts to a Sonatype Snapshot repository, run the Cobertura Code Coverage reports and deploy the application to the Amazon EC2. The details of the actual application are explained in the earlier post given by the link <a href="http://elizabetht.github.io/blog/2013/12/13/student-enrollment-using-jersey-rest-with-spring/">Building Java Web Application Using Jersey REST With Spring</a>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/01/13/jenkins-snapshot-upload/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/23/jersey2-rest-client-with-junit-and-jmock/">Building Jersey2 REST Client Using Spring With JUnit and JMock</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-23T12:10:30-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2013</span></span> <span class='time'>12:10 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post will show how to create a Jersey2 REST Client in a Spring environment and test the same using JUnit and JMock frameworks. The details of the actual application are explained in the earlier post given by the link <a href="http://elizabetht.github.io/blog/2013/12/13/student-enrollment-using-jersey-rest-with-spring/">Building Java Web Application Using Jersey REST With Spring</a>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/12/23/jersey2-rest-client-with-junit-and-jmock/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/09/11/provisioning-an-apache-server-with-dockers-and-vagrant/">Provisioning an Apache Server With Dockers and Vagrant</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/13/connecting-to-open-vpn-server-from-ios-device/">Connecting to Open VPN Server From iOS Device</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/01/jenkins-android/">Automating the Continuous Integration of Android Projects With Gradle Using Jenkins on Windows</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/05/jenkins-release-upload/">Automating the Release of Java Artifacts Using Jenkins on Windows</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/17/wordpress-on-aws/">WordPress on AWS</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Meygam Inc
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'SaravanaKumar';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
